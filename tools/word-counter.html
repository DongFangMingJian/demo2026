[file name]: tools/word-counter.html
[file content begin]
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>字数统计器 | 精确文字分析工具</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #6b8cbc;
            --accent-color: #ff7e5f;
            --text-color: #333;
            --bg-color: #f9f9f9;
            --card-bg: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        .dark-mode {
            --primary-color: #6b8cbc;
            --secondary-color: #4a6fa5;
            --accent-color: #ff9e80;
            --text-color: #f0f0f0;
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: var(--transition);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* 头部 */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--secondary-color);
        }

        .logo a {
            text-decoration: none;
            display: flex;
            align-items: center;
            color: var(--primary-color);
        }

        .logo h1 {
            font-size: 1.8rem;
            margin-left: 10px;
        }

        .logo-icon {
            font-size: 2rem;
        }

        .nav-controls {
            display: flex;
            align-items: center;
        }

        .nav-links {
            display: flex;
            list-style: none;
            margin-right: 30px;
        }

        .nav-links li {
            margin-left: 25px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 600;
            transition: var(--transition);
            padding: 5px 10px;
            border-radius: 4px;
        }

        .nav-links a:hover {
            color: var(--primary-color);
            background-color: rgba(74, 111, 165, 0.1);
        }

        .nav-links a.active {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
        }

        .theme-switch-wrapper {
            display: flex;
            align-items: center;
        }

        .theme-switch {
            display: inline-block;
            height: 34px;
            position: relative;
            width: 60px;
        }

        .theme-switch input {
            display: none;
        }

        .slider {
            background-color: #ccc;
            bottom: 0;
            cursor: pointer;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            transition: var(--transition);
            border-radius: 34px;
        }

        .slider:before {
            background-color: #fff;
            bottom: 4px;
            content: "";
            height: 26px;
            left: 4px;
            position: absolute;
            transition: var(--transition);
            width: 26px;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .theme-label {
            margin-left: 10px;
            font-weight: 600;
        }

        /* 页面头部 */
        .page-header {
            text-align: center;
            padding: 40px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(74, 111, 165, 0.2);
        }

        .page-header h2 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .page-header p {
            font-size: 1.2rem;
            color: var(--secondary-color);
            max-width: 700px;
            margin: 0 auto;
        }

        /* 主内容布局 */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 60px;
        }

        @media (max-width: 992px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }

        /* 输入区域 */
        .input-section {
            display: flex;
            flex-direction: column;
        }

        .input-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .input-label h3 {
            font-size: 1.4rem;
            color: var(--primary-color);
        }

        .input-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 8px 16px;
            background-color: rgba(74, 111, 165, 0.1);
            color: var(--primary-color);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .action-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        .text-input {
            width: 100%;
            min-height: 400px;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1rem;
            line-height: 1.5;
            border: 2px solid rgba(74, 111, 165, 0.2);
            border-radius: var(--border-radius);
            background-color: var(--card-bg);
            color: var(--text-color);
            resize: vertical;
            transition: var(--transition);
        }

        .text-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.1);
        }

        .text-input::placeholder {
            color: var(--secondary-color);
            opacity: 0.7;
        }

        /* 统计结果区域 */
        .results-section {
            display: flex;
            flex-direction: column;
        }

        .results-label h3 {
            font-size: 1.4rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        /* 统计概览 */
        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px var(--shadow-color);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px var(--shadow-color);
        }

        .stat-card.highlight {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-card.highlight .stat-number {
            color: white;
        }

        .stat-card:not(.highlight) .stat-number {
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.9rem;
            font-weight: 600;
        }

        .stat-card.highlight .stat-label {
            color: rgba(255, 255, 255, 0.9);
        }

        .stat-card:not(.highlight) .stat-label {
            color: var(--secondary-color);
        }

        /* 详细统计 */
        .detailed-stats {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: 0 8px 20px var(--shadow-color);
        }

        .detailed-stats h3 {
            font-size: 1.4rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(74, 111, 165, 0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(74, 111, 165, 0.1);
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-name {
            color: var(--secondary-color);
            font-weight: 600;
        }

        .stat-value {
            font-weight: 700;
            color: var(--primary-color);
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
        }

        /* 文本分析 */
        .text-analysis {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 8px 20px var(--shadow-color);
        }

        .text-analysis h3 {
            font-size: 1.4rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(74, 111, 165, 0.2);
        }

        .analysis-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .analysis-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .analysis-icon {
            color: var(--primary-color);
            font-size: 1.2rem;
            width: 30px;
        }

        .analysis-text {
            color: var(--text-color);
            flex-grow: 1;
        }

        /* 使用说明 */
        .instructions {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 60px;
            box-shadow: 0 8px 20px var(--shadow-color);
            border-left: 4px solid var(--accent-color);
        }

        .instructions h3 {
            font-size: 1.4rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .instructions p {
            margin-bottom: 10px;
            color: var(--secondary-color);
        }

        .instructions ul {
            margin-left: 20px;
            margin-bottom: 15px;
            color: var(--secondary-color);
        }

        .instructions li {
            margin-bottom: 5px;
        }

        /* 页脚 */
        footer {
            text-align: center;
            padding: 20px;
            color: var(--secondary-color);
            font-size: 0.9rem;
            border-top: 1px solid rgba(74, 111, 165, 0.2);
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            list-style: none;
            margin-bottom: 25px;
        }

        .footer-links li {
            margin: 0 15px;
        }

        .footer-links a {
            color: var(--secondary-color);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--primary-color);
        }

        .copyright {
            color: var(--secondary-color);
            font-size: 0.9rem;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .nav-controls {
                width: 100%;
                justify-content: space-between;
                margin-top: 20px;
            }
            
            .nav-links {
                margin-right: 0;
            }
            
            .page-header h2 {
                font-size: 2.2rem;
            }
            
            .page-header p {
                font-size: 1rem;
            }
            
            .stats-overview {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            .nav-controls {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .nav-links {
                flex-wrap: wrap;
                margin-bottom: 20px;
            }
            
            .nav-links li {
                margin: 5px 15px 5px 0;
            }
            
            .theme-switch-wrapper {
                align-self: flex-end;
            }
            
            .stats-overview {
                grid-template-columns: 1fr;
            }
            
            .input-actions {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 头部 - 完整的导航栏，修改了链接前缀 -->
        <header>
            <div class="logo">
                <a href="../index.html">
                    <i class="fas fa-font logo-icon"></i>
                    <h1>字数统计器</h1>
                </a>
            </div>
            <div class="nav-controls">
                <ul class="nav-links">
                    <li><a href="../index.html">个人门户</a></li>
                    <li><a href="../tools.html">工具集</a></li>
                    <li><a href="word-counter.html" class="active">字数统计</a></li>
                    <li><a href="../blog.html">博客</a></li>
                    <li><a href="../bookshelf.html">书架</a></li>
                    <li><a href="../image-host.html">图床</a></li>
                </ul>
                <div class="theme-switch-wrapper">
                    <label class="theme-switch" for="checkbox">
                        <input type="checkbox" id="checkbox" />
                        <div class="slider"></div>
                    </label>
                    <div class="theme-label">夜间模式</div>
                </div>
            </div>
        </header>

        <!-- 页面头部 -->
        <section class="page-header">
            <h2>字数统计器</h2>
            <p>精确分析文本内容，统计汉字、字符、单词数量，提供详细的文本分析报告。</p>
        </section>

        <!-- 主内容布局 -->
        <div class="main-layout">
            <!-- 输入区域 -->
            <section class="input-section">
                <div class="input-label">
                    <h3>输入文本</h3>
                    <div class="input-actions">
                        <button class="action-btn" id="clear-btn">清空文本</button>
                        <button class="action-btn" id="sample-btn">示例文本</button>
                    </div>
                </div>
                <!-- 清空文本框，只留提示 -->
                <textarea class="text-input" id="text-input" placeholder="请输入或粘贴要分析的文本..."></textarea>
            </section>

            <!-- 统计结果区域 -->
            <section class="results-section">
                <div class="results-label">
                    <h3>统计结果</h3>
                </div>
                
                <!-- 统计概览 - 调整顺序，汉字数高亮并在第一位置 -->
                <div class="stats-overview">
                    <!-- 汉字数量放在第一个，高亮显示 -->
                    <div class="stat-card highlight">
                        <div class="stat-number" id="chinese-chars">0</div>
                        <div class="stat-label">汉字数量</div>
                    </div>
                    <!-- 总字符数放在第二个 -->
                    <div class="stat-card">
                        <div class="stat-number" id="total-chars">0</div>
                        <div class="stat-label">总字符数</div>
                    </div>
                    <!-- 英文单词和总行数保持原位置 -->
                    <div class="stat-card">
                        <div class="stat-number" id="english-words">0</div>
                        <div class="stat-label">英文单词</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-lines">0</div>
                        <div class="stat-label">总行数</div>
                    </div>
                </div>

                <!-- 详细统计 -->
                <div class="detailed-stats">
                    <h3>详细统计</h3>
                    <div class="stats-grid" id="detailed-stats">
                        <!-- 详细统计将通过JavaScript动态生成 -->
                    </div>
                </div>
            </section>
        </div>

        <!-- 文本分析 - 移除文本密度 -->
        <div class="text-analysis">
            <h3>文本分析</h3>
            <div class="analysis-content" id="text-analysis">
                <!-- 文本分析将通过JavaScript动态生成 -->
            </div>
        </div>

        <!-- 使用说明 -->
        <div class="instructions">
            <h3>使用说明</h3>
            <p>1. 在左侧文本框中输入或粘贴要分析的文本内容。</p>
            <p>2. 统计结果会自动更新，无需手动点击按钮。</p>
            <p>3. 使用工具栏按钮可以快速清空或加载示例文本。</p>
            <p>4. 所有统计结果都支持实时更新，修改文本内容后统计结果会立即变化。</p>
            <p>5. 统计维度说明：</p>
            <ul>
                <li><strong>汉字数量</strong>：只统计中文字符（不包括中文标点）</li>
                <li><strong>总字符数</strong>：包含所有字符（汉字、字母、数字、标点、空格）</li>
                <li><strong>英文字母</strong>：统计A-Z和a-z字母数量</li>
                <li><strong>英文单词</strong>：按空格和标点分割的英文单词数量</li>
                <li><strong>数字</strong>：统计0-9数字字符数量</li>
                <li><strong>空格</strong>：统计空格字符数量</li>
                <li><strong>标点符号</strong>：统计中英文标点符号数量</li>
                <li><strong>段落数</strong>：按空行分隔的段落数量</li>
            </ul>
        </div>

        <!-- 页脚 - 完整的页脚链接，修改了链接前缀 -->
        <footer>
            <div class="footer-content">
                <ul class="footer-links">
                    <li><a href="../index.html">个人门户</a></li>
                    <li><a href="../tools.html">工具集</a></li>
                    <li><a href="word-counter.html">字数统计</a></li>
                    <li><a href="../blog.html">博客</a></li>
                    <li><a href="../bookshelf.html">书架</a></li>
                    <li><a href="../image-host.html">图床</a></li>
                </ul>
                <p class="copyright">© 2023 字数统计器 | 精确文字分析工具，支持实时统计与详细报告</p>
                <p class="copyright">最后更新: <span id="current-date"></span> | 版本: 1.0.0</p>
            </div>
        </footer>
    </div>

    <!-- 加载配置和共享组件 - 修改了路径 -->
    <script src="../config.js"></script>
    <script src="../shared/darkmode.js"></script>
    
    <script>
        // ======================
        // 字数统计器功能脚本
        // ======================
        
        // DOM元素
        const textInput = document.getElementById('text-input');
        const clearBtn = document.getElementById('clear-btn');
        const sampleBtn = document.getElementById('sample-btn');
        
        // 统计结果显示元素（注意：现在汉字数放在第一个位置了）
        const chineseCharsEl = document.getElementById('chinese-chars');  // 现在是第一个高亮卡片
        const totalCharsEl = document.getElementById('total-chars');      // 现在是第二个卡片
        const englishWordsEl = document.getElementById('english-words');
        const totalLinesEl = document.getElementById('total-lines');
        const detailedStatsEl = document.getElementById('detailed-stats');
        const textAnalysisEl = document.getElementById('text-analysis');

        // 示例文本
        const sampleText = `《春夜喜雨》 - 杜甫

好雨知时节，当春乃发生。
随风潜入夜，润物细无声。
野径云俱黑，江船火独明。
晓看红湿处，花重锦官城。

这首诗描绘了春夜降雨、润泽万物的美景，表达了诗人对春雨的喜悦之情。全诗意境淡雅，意蕴清幽，诗境与画境浑然一体，是一首传神入化、别具风韵的咏雨诗。

The Spring Festival is the most important traditional festival in China. It is also known as the Chinese New Year. People usually clean their houses, buy new clothes, and prepare special food for the festival. On New Year's Eve, families gather together to have a big dinner and watch the Spring Festival Gala on TV. Children receive red envelopes with money from their elders.

春节是中国最重要的传统节日，也称为农历新年。人们通常会打扫房屋、购买新衣服，并为节日准备特别的食品。在除夕夜，家人聚在一起吃年夜饭，观看春节联欢晚会。孩子们会从长辈那里收到装有压岁钱的红包。

统计信息：本段文字包含中文诗歌、英文介绍和中文翻译，适合测试字数统计功能。`;

        // 初始化函数
        function init() {
            console.log("字数统计器初始化开始...");
            
            // 设置当前日期
            setCurrentDate();
            
            // 初始化暗色模式
            initDarkMode();
            
            // 绑定事件监听器
            bindEvents();
            
            // 初始统计（文本为空，所以都是0）
            updateStatistics();
            
            console.log("字数统计器初始化完成！");
        }

        // 初始化暗色模式
        function initDarkMode() {
            const checkbox = document.getElementById('checkbox');
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            
            // 加载保存的暗色模式设置
            if (savedDarkMode) {
                document.body.classList.add('dark-mode');
                if (checkbox) checkbox.checked = true;
            }
            
            // 监听暗色模式切换
            if (checkbox) {
                checkbox.addEventListener('change', function() {
                    document.body.classList.toggle('dark-mode');
                    const isDarkMode = document.body.classList.contains('dark-mode');
                    localStorage.setItem('darkMode', isDarkMode);
                });
            }
            
            // 监听系统暗色模式
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                if (!localStorage.getItem('darkMode')) {
                    document.body.classList.add('dark-mode');
                    if (checkbox) checkbox.checked = true;
                }
            }
        }

        // 绑定事件
        function bindEvents() {
            console.log("绑定事件监听器...");
            
            // 文本输入变化时更新统计
            textInput.addEventListener('input', updateStatistics);
            
            // 清空按钮
            clearBtn.addEventListener('click', function() {
                textInput.value = '';
                textInput.focus();
                updateStatistics();
            });
            
            // 示例文本按钮
            sampleBtn.addEventListener('click', function() {
                textInput.value = sampleText;
                textInput.focus();
                updateStatistics();
            });
            
            console.log("事件监听器绑定完成");
        }

        // 更新统计信息
        function updateStatistics() {
            const text = textInput.value;
            console.log("更新统计，文本长度:", text.length);
            
            // 基础统计
            const totalChars = text.length;
            const totalCharsNoSpaces = text.replace(/\s/g, '').length;
            
            // 汉字统计（中文字符Unicode范围，不包括标点）
            const chineseRegex = /[\u4e00-\u9fa5]/g;  // 只包括基本汉字，不包括标点
            const chineseMatches = text.match(chineseRegex) || [];
            const chineseChars = chineseMatches.length;
            
            // 英文字母统计
            const englishLettersRegex = /[a-zA-Z]/g;
            const englishLettersMatches = text.match(englishLettersRegex) || [];
            const englishLetters = englishLettersMatches.length;
            
            // 英文单词统计（按空格分割，过滤空字符串）
            const englishWordsArray = text.split(/\s+/).filter(word => {
                // 只保留包含字母的单词
                return /[a-zA-Z]/.test(word);
            });
            const englishWords = englishWordsArray.length;
            
            // 数字统计
            const digitsRegex = /[0-9]/g;
            const digitsMatches = text.match(digitsRegex) || [];
            const digits = digitsMatches.length;
            
            // 空格统计
            const spacesRegex = /\s/g;
            const spacesMatches = text.match(spacesRegex) || [];
            const spaces = spacesMatches.length;
            
            // 标点符号统计（中英文标点）
            const punctuationRegex = /[.,!?;:'"`~@#$%^&*()_+\-=\[\]{}|\\<>\/，。！？；："'「」『』（）《》【】]/g;
            const punctuationMatches = text.match(punctuationRegex) || [];
            const punctuation = punctuationMatches.length;
            
            // 段落统计（按空行分割）
            const paragraphs = text.trim() === '' ? 0 : text.split(/\n\s*\n/).filter(p => p.trim() !== '').length;
            
            // 行数统计
            const lines = text === '' ? 0 : text.split('\n').length;
            
            // 中文字数（按字符计算）
            const chineseWordCount = chineseChars;
            
            // 阅读时间估算（按中文每分钟300字，英文每分钟200单词）
            const readingTimeChinese = Math.max(1, Math.ceil(chineseWordCount / 300));
            const readingTimeEnglish = Math.max(1, Math.ceil(englishWords / 200));
            const totalReadingTime = readingTimeChinese + readingTimeEnglish;
            
            // 写作时间估算（按中文每分钟30字，英文每分钟20单词）
            const writingTimeChinese = Math.max(1, Math.ceil(chineseWordCount / 30));
            const writingTimeEnglish = Math.max(1, Math.ceil(englishWords / 20));
            const totalWritingTime = writingTimeChinese + writingTimeEnglish;
            
            console.log("统计结果:", {
                chineseChars,
                totalChars,
                englishWords,
                lines
            });
            
            // 更新概览统计（注意：现在汉字数在第一个位置）
            chineseCharsEl.textContent = formatNumber(chineseChars);
            totalCharsEl.textContent = formatNumber(totalChars);
            englishWordsEl.textContent = formatNumber(englishWords);
            totalLinesEl.textContent = formatNumber(lines);
            
            // 更新详细统计
            updateDetailedStats({
                totalChars,
                totalCharsNoSpaces,
                chineseChars,
                englishLetters,
                englishWords,
                digits,
                spaces,
                punctuation,
                paragraphs,
                lines,
                chineseWordCount
            });
            
            // 更新文本分析
            updateTextAnalysis({
                totalReadingTime,
                totalWritingTime,
                readingTimeChinese,
                readingTimeEnglish,
                writingTimeChinese,
                writingTimeEnglish,
                text,
                chineseChars,
                englishWords,
                totalChars
            });
        }

        // 更新详细统计
        function updateDetailedStats(stats) {
            const statsItems = [
                { name: '汉字数量', value: stats.chineseChars },
                { name: '总字符数（含空格）', value: stats.totalChars },
                { name: '总字符数（不含空格）', value: stats.totalCharsNoSpaces },
                { name: '英文字母数', value: stats.englishLetters },
                { name: '英文单词数', value: stats.englishWords },
                { name: '数字字符数', value: stats.digits },
                { name: '空格数量', value: stats.spaces },
                { name: '标点符号数', value: stats.punctuation },
                { name: '段落数量', value: stats.paragraphs },
                { name: '行数', value: stats.lines }
            ];
            
            let statsHTML = '';
            statsItems.forEach(item => {
                statsHTML += `
                    <div class="stat-item">
                        <span class="stat-name">${item.name}</span>
                        <span class="stat-value">${formatNumber(item.value)}</span>
                    </div>
                `;
            });
            
            detailedStatsEl.innerHTML = statsHTML;
        }

        // 更新文本分析 - 移除文本密度，修复NaN问题
        function updateTextAnalysis(analysis) {
            // 判断文本类型
            let textType = '混合文本';
            if (analysis.chineseChars > 0 && analysis.englishWords === 0) {
                textType = '纯中文文本';
            } else if (analysis.englishWords > 0 && analysis.chineseChars === 0) {
                textType = '纯英文文本';
            }
            
            // 估算文件大小（UTF-8编码，中文字符3字节，英文字符1字节）
            const estimatedSize = (analysis.chineseChars * 3 + (analysis.totalChars - analysis.chineseChars)).toFixed(2);
            const estimatedSizeKB = (estimatedSize / 1024).toFixed(2);
            
            // 计算字符比例
            const chinesePercentage = analysis.totalChars > 0 ? ((analysis.chineseChars / analysis.totalChars) * 100).toFixed(1) : "0";
            const englishPercentage = analysis.totalChars > 0 ? ((analysis.englishWords * 5 / analysis.totalChars) * 100).toFixed(1) : "0"; // 单词平均长度约5字符
            
            const analysisItems = [
                {
                    icon: 'fas fa-clock',
                    text: `预计阅读时间: <strong>${analysis.totalReadingTime}分钟</strong> (中文${analysis.readingTimeChinese}分钟 + 英文${analysis.readingTimeEnglish}分钟)`
                },
                {
                    icon: 'fas fa-pen',
                    text: `预计写作时间: <strong>${analysis.totalWritingTime}分钟</strong> (中文${analysis.writingTimeChinese}分钟 + 英文${analysis.writingTimeEnglish}分钟)`
                },
                {
                    icon: 'fas fa-chart-pie',
                    text: `文本类型: <strong>${textType}</strong> (汉字占比: ${chinesePercentage}%，英文占比: ${englishPercentage}%)`
                },
                {
                    icon: 'fas fa-weight',
                    text: `估算文件大小: <strong>${estimatedSize}字节</strong> (约${estimatedSizeKB}KB)`
                }
            ];
            
            let analysisHTML = '';
            analysisItems.forEach(item => {
                analysisHTML += `
                    <div class="analysis-item">
                        <i class="fas ${item.icon} analysis-icon"></i>
                        <div class="analysis-text">${item.text}</div>
                    </div>
                `;
            });
            
            textAnalysisEl.innerHTML = analysisHTML;
        }

        // 格式化数字（添加千位分隔符）
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }

        // 设置当前日期
        function setCurrentDate() {
            const currentDateElement = document.getElementById('current-date');
            if (currentDateElement) {
                const now = new Date();
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                currentDateElement.textContent = now.toLocaleDateString('zh-CN', options);
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
[file content end]